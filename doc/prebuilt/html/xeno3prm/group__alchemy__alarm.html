<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Xenomai: Alarm services</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__alchemy__alarm.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Alarm services<div class="ingroups"><a class="el" href="group__alchemy.html">Alchemy API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>General-purpose watchdog timers.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Alarm services:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__alchemy__alarm.png" border="0" alt="" usemap="#group____alchemy____alarm"/>
<map name="group____alchemy____alarm" id="group____alchemy____alarm">
<area shape="rect" id="node1" href="group__alchemy.html" title="A programming interface reminiscent from traditional RTOS APIs. " alt="" coords="5,5,104,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRT__ALARM__INFO.html">RT_ALARM_INFO</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alarm status descriptor.  <a href="structRT__ALARM__INFO.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0d9cb8ae623be0f7224ac47b10a0b542"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__alarm.html#ga0d9cb8ae623be0f7224ac47b10a0b542">rt_alarm_start</a> (RT_ALARM *alarm, RTIME value, RTIME interval)</td></tr>
<tr class="memdesc:ga0d9cb8ae623be0f7224ac47b10a0b542"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start an alarm.  <a href="#ga0d9cb8ae623be0f7224ac47b10a0b542">More...</a><br /></td></tr>
<tr class="separator:ga0d9cb8ae623be0f7224ac47b10a0b542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71f2ffec98e3e23fe5d7f87c2cb24d77"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__alarm.html#ga71f2ffec98e3e23fe5d7f87c2cb24d77">rt_alarm_stop</a> (RT_ALARM *alarm)</td></tr>
<tr class="memdesc:ga71f2ffec98e3e23fe5d7f87c2cb24d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop an alarm.  <a href="#ga71f2ffec98e3e23fe5d7f87c2cb24d77">More...</a><br /></td></tr>
<tr class="separator:ga71f2ffec98e3e23fe5d7f87c2cb24d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25c4556b6e2f6fa220a734bf83c4c374"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__alarm.html#ga25c4556b6e2f6fa220a734bf83c4c374">rt_alarm_inquire</a> (RT_ALARM *alarm, <a class="el" href="structRT__ALARM__INFO.html">RT_ALARM_INFO</a> *info)</td></tr>
<tr class="memdesc:ga25c4556b6e2f6fa220a734bf83c4c374"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query alarm status.  <a href="#ga25c4556b6e2f6fa220a734bf83c4c374">More...</a><br /></td></tr>
<tr class="separator:ga25c4556b6e2f6fa220a734bf83c4c374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a68de9a92f14911fc787de9288fc078"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__alarm.html#ga3a68de9a92f14911fc787de9288fc078">rt_alarm_create</a> (RT_ALARM *alarm, const char *name, void(*handler)(void *arg), void *arg)</td></tr>
<tr class="memdesc:ga3a68de9a92f14911fc787de9288fc078"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an alarm object.  <a href="#ga3a68de9a92f14911fc787de9288fc078">More...</a><br /></td></tr>
<tr class="separator:ga3a68de9a92f14911fc787de9288fc078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf00e05b47b1183816480e270d326f9ac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__alarm.html#gaf00e05b47b1183816480e270d326f9ac">rt_alarm_delete</a> (RT_ALARM *alarm)</td></tr>
<tr class="memdesc:gaf00e05b47b1183816480e270d326f9ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete an alarm.  <a href="#gaf00e05b47b1183816480e270d326f9ac">More...</a><br /></td></tr>
<tr class="separator:gaf00e05b47b1183816480e270d326f9ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>General-purpose watchdog timers. </p>
<p>Alarms are general-purpose watchdog timers. Alchemy tasks may create any number of alarms and use them to run a user-defined handler, after a specified initial delay has elapsed. Alarms can be either one shot or periodic; in the latter case, the real-time system automatically reprograms the alarm for the next shot according to a user-defined interval value. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga3a68de9a92f14911fc787de9288fc078"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_alarm_create </td>
          <td>(</td>
          <td class="paramtype">RT_ALARM *&#160;</td>
          <td class="paramname"><em>alarm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *arg)&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an alarm object. </p>
<p>This routine creates an object triggering an alarm routine at a specified time in the future. Alarms can be periodic or oneshot, depending on the reload interval value passed to <a class="el" href="group__alchemy__alarm.html#ga0d9cb8ae623be0f7224ac47b10a0b542" title="Start an alarm. ">rt_alarm_start()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>The address of an alarm descriptor which can be later used to identify uniquely the created object, upon success of this call.</td></tr>
    <tr><td class="paramname">name</td><td>An ASCII string standing for the symbolic name of the alarm. When non-NULL and non-empty, a copy of this string is used for indexing the created alarm into the object registry.</td></tr>
    <tr><td class="paramname">handler</td><td>The address of the routine to call when the alarm expires. This routine is passed the <em>arg</em> value.</td></tr>
    <tr><td class="paramname">arg</td><td>A user-defined opaque argument passed to the <em>handler</em>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-ENOMEM is returned if the system fails to get memory from the local pool in order to create the alarm.</li>
<li>-EEXIST is returned if the <em>name</em> is conflicting with an already registered alarm.</li>
<li>-EPERM is returned if this service was called from an asynchronous context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">thread-unrestricted, switch-secondary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Alarms are process-private objects and thus cannot be shared by multiple processes, even if they belong to the same Xenomai session. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf00e05b47b1183816480e270d326f9ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_alarm_delete </td>
          <td>(</td>
          <td class="paramtype">RT_ALARM *&#160;</td>
          <td class="paramname"><em>alarm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete an alarm. </p>
<p>This routine deletes an alarm object previously created by a call to <a class="el" href="group__alchemy__alarm.html#ga3a68de9a92f14911fc787de9288fc078" title="Create an alarm object. ">rt_alarm_create()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>The alarm descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>alarm</em> is not a valid alarm descriptor.</li>
<li>-EPERM is returned if this service was called from an asynchronous context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">thread-unrestricted, switch-secondary</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga25c4556b6e2f6fa220a734bf83c4c374"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_alarm_inquire </td>
          <td>(</td>
          <td class="paramtype">RT_ALARM *&#160;</td>
          <td class="paramname"><em>alarm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRT__ALARM__INFO.html">RT_ALARM_INFO</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query alarm status. </p>
<p>This routine returns the status information about the specified <em>alarm</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>The alarm descriptor.</td></tr>
    <tr><td class="paramname">info</td><td>A pointer to the <a class="el" href="structRT__ALARM__INFO.html#RT_ALARM_INFO">return</a>buffer" to copy the information to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned and status information is written to the structure pointed at by <em>info</em> upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>alarm</em> is not a valid alarm descriptor.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted, switch-primary</a> </dd></dl>

<p>References <a class="el" href="structRT__ALARM__INFO.html#af0a45680476596e86488276a0bb624ae">RT_ALARM_INFO::active</a>, <a class="el" href="structRT__ALARM__INFO.html#a9f793d6a1ccdb6e4172c153821c11865">RT_ALARM_INFO::expiries</a>, and <a class="el" href="structRT__ALARM__INFO.html#a6d49da2aa84fe76b1099a47ad286415a">RT_ALARM_INFO::name</a>.</p>

</div>
</div>
<a class="anchor" id="ga0d9cb8ae623be0f7224ac47b10a0b542"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_alarm_start </td>
          <td>(</td>
          <td class="paramtype">RT_ALARM *&#160;</td>
          <td class="paramname"><em>alarm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>interval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start an alarm. </p>
<p>This routine programs the trigger date of an alarm object. An alarm can be either periodic or oneshot, depending on the <em>interval</em> value.</p>
<p>Alarm handlers are always called on behalf of Xenomai's internal timer event routine. Therefore, Xenomai routines which can be called from such handlers are restricted to the set of services available on behalf of an asynchronous context.</p>
<p>This service overrides any previous setup of the expiry date and reload interval for the alarm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>The alarm descriptor.</td></tr>
    <tr><td class="paramname">value</td><td>The relative date of the first expiry, expressed in clock ticks (see note).</td></tr>
    <tr><td class="paramname">interval</td><td>The reload value of the alarm. It is a periodic interval value to be used for reprogramming the next alarm shot, expressed in clock ticks (see note). If <em>interval</em> is equal to TM_INFINITE, the alarm will not be reloaded after it has expired.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>alarm</em> is not a valid alarm descriptor.</li>
<li>-EPERM is returned if this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Each of the initial <em>value</em> and <em>interval</em> is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>

</div>
</div>
<a class="anchor" id="ga71f2ffec98e3e23fe5d7f87c2cb24d77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_alarm_stop </td>
          <td>(</td>
          <td class="paramtype">RT_ALARM *&#160;</td>
          <td class="paramname"><em>alarm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop an alarm. </p>
<p>This routine disables an alarm object, preventing any further expiry until it is re-enabled via <a class="el" href="group__alchemy__alarm.html#ga0d9cb8ae623be0f7224ac47b10a0b542" title="Start an alarm. ">rt_alarm_start()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>The alarm descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>alarm</em> is not a valid alarm descriptor.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted, switch-primary</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
